const lgaData = {
  Esan_North_East: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Esan North East",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Ovia_South_West: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Ovia South West",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Ovia_North_East: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Ovia North East",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Oredo: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Oredo",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Ikpoba_Okha: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Ikpoba Okha",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Orhionmwon: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Orhionmwon",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Uhunmwonde: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Uhunmwonde",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Owan_West: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Owan West",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Owan_East: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Owan East",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Akoko_Edo: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Akoko Edo",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Etsako_East: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Etsako East",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Etsako_Central: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Etsako Central",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Etsako_West: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Etsako West",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Esan_Central: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Esan Central",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Esan_South_East: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Esan South East",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Igueben: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Igueben",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Esan_West: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Esan West",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },

  Egor: {
    title: "Polling Analysis",
    subtitle: "Top Three Candidates",
    lgaName: "Egor",
    candidates: [
      { name: "Ighodalo", percentage: "53.3%", votes: "53,000" },
      { name: "Akpata", percentage: "34.5%", votes: "34,500" },
      { name: "Okpebholo", percentage: "12.3%", votes: "12,300" },
    ],
  },
};

document.addEventListener("DOMContentLoaded", function () {
  const tooltip = document.querySelector(".individualOverlayToolTip");
  const svgMap = document.getElementById("Edo_State_Map");
  const svgMap2 = document.getElementById("Edo_State_Map2");
  const lgaPaths = svgMap.querySelectorAll("path");
  const pdpLGA = document.querySelector("#Esan_South_East");
  const apcLGA = document.querySelector("#Esan_Central");
  const lpLGA = document.querySelector("#Oredo");
  const prevDetails = document.querySelector("#previousElection");
  const chart1Container = document.querySelector("#overviewChart");
  // const chart2Container = document.querySelector("#overviewChart2");

  // chart2Container.style.display = 'none';


  // Hide tooltip initially
  tooltip.style.display = "none";
  lgaPaths.forEach((path) => {
    path.addEventListener("mouseenter", showTooltip);
    path.addEventListener("mouseleave", hideTooltip);
  });

  document.addEventListener("mousemove", moveTooltip);

  function showTooltip(event) {
    const lgaId = event.target.id;
    const data = lgaData[lgaId];

    if (data) {
      tooltip.innerHTML = `
        <div class="headerToolTip">
          <div class="headerLeftSide">
            <p class="toolTipTitle">${data.title}</p>
            <p class="subTitle">${data.subtitle}</p>
          </div>
          <p class="LGA_Name">${data.lgaName}</p>
        </div>
        <ul class="topThreeList">
          ${data.candidates
            .map(
              (candidate, index) => `
            <li id="candidate${index + 1}" class="candidateAnalysis">
              <p>${candidate.name}</p>
              <p>${candidate.percentage}</p>
              <p>${candidate.votes}</p>
            </li>
            ${
              index < data.candidates.length - 1
                ? '<hr class="dividerLine">'
                : ""
            }
          `
            )
            .join("")}
        </ul>
      `;

      tooltip.style.display = "flex";
    }
  }

  function hideTooltip() {
    tooltip.style.display = "none";
  }

  const vH = window.innerHeight;
  const wH = window.innerWidth;
  let xOff = 0;
  let yOff = 0;

  function moveTooltip(event) {
    const mapRect = svgMap.getBoundingClientRect();
    // const x = event.clientX - mapRect.left;
    // const y = event.clientY - mapRect.top;
    const x = event.clientX;
    const y = event.clientY;

    if (y + 200 > vH) {
      yOff = y + 200 - vH;
    }

    tooltip.style.left = `${x}px`;
    tooltip.style.top = `${y - yOff}px`;
    tooltip.style.transform = "translate(2%, 2%)";
  }

  var options = {   
    
    series: [
      {
        name: 'Akpata',
        data: [44000],
      },
      {
        name: 'Ighodalo',
        data: [53000],
      },
      {
        name: 'Okpebolo',
        data: [11000],
      },
    ],
    colors: ["#02A526", "#EC293A", "#56D1E3"],

    chart: {
      type: "bar",
      height: 350,
      height: '60%',
      width: '80%',
      // stacked: true,
      // stackType: "100%",
    },
    plotOptions: {
      bar: {
        horizontal: true,
        borderRadius: 4,
        borderRadiusApplication: 'end',
        columnWidth: '30%',
      },
    },
    stroke: {
      width: 1,
      colors: ["#fff"],
    },

    title: {
      text: "#EDODECIDES2024, TOP THREE CANDIDATES",
      align: 'Left',
      style: {
        fontSize:  '15px',
        fontWeight:  'Regular',
        fontFamily:  'poppins',
        color:  '#ffffff',
      },
    },

    xaxis: {
      categories: [''],
      labels: {
        style: {
          fontSize:  '10px',
          fontWeight:  600,
          fontFamily:  'poppins, Arial, sans-serif',
          colors:  ['white', 'white', 'white'],
          cssClass: 'apexcharts-xaxis-label',
        },
      },
    },

    // yaxis: {
    //   title: {
    //     text: '%Lead'
    //   }
    // },

    tooltip: {
      y: {
        formatter: function (val) {
          return val;
        },
      },
    },
    fill: {
      opacity: 1,
    },
    legend: {
      position: "top",
      horizontalAlign: "center",
      offsetX: 40,
      labels: {
        fontSize: '10px',
        fontWeight: 600,
        fontFamily: 'helvetica, Arial, sans-serif',
        colors:  ['white', 'white', 'white'],
        cssClass: 'apexcharts-xaxis-label',
      },
    },
  };
  var chart = new ApexCharts(chart1Container, options);
  chart.render();

  var options2 = {
    series: [
      {
        data: [
          400, 430, 448, 470, 540, 580, 690, 1100, 1200, 400, 430, 448, 470,
          540, 580, 690, 1100, 1200,
        ],
      },
    ],
    chart: {
      type: "bar",
      height: "88%",
      width: "85%",
    },
    plotOptions: {
      bar: {
        borderRadius: 4,
        borderRadiusApplication: "end",
        horizontal: true,
      },

      labels: {
        style: {
          fontSize: "10px",
          fontWeight: 600,
          fontFamily: "poppins, Arial, sans-serif",
          colors: ["white", "white", "white"],
          cssClass: "apexcharts-xaxis-label",
        },
      },
    },
    dataLabels: {
      enabled: false,
    },
    xaxis: {
      categories: [
        "Iyere Kennedy",
        "Iseghohi Tom",
        "Udoh David",
        "Izedonmwen Osarenren",
        "Akhimie Kingson",
        "Okpebholo Monday",
        "Osifo Isaiah",
        "Ugiagbe Odaro",
        "Areloegbe Osalumese",
        "Osiriame Edeipo",
        "Akpata Olumide",
        "Alufohai Oluyinka",
        "Ighodalo Asueirhinme",
        "Key Patience",
        "Anerua Abdulai",
        "Okungbowa Paul",
        "Akhalamhie Amiemenogbena",
      ],
      labels: {
        style: {
          fontSize: "10px",
          fontWeight: 600,
          fontFamily: "poppins",
          colors: [
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
          ],
          cssClass: "apexcharts-xaxis-label",
        },
      },
    },
  };

  var options3 = {
    series: [
      {
        data: [
          66, 430, 448, 470, 540, 580, 690, 1100, 1200, 400, 430, 448, 470,
          540, 580, 690, 1100, 1200,
        ],
      },
    ],
    chart: {
      type: "bar",
      height: "88%",
      width: "85%",
      stackType: "100%",
    },
    plotOptions: {
      bar: {
        borderRadius: 4,
        borderRadiusApplication: "end",
        horizontal: true,
      },

      labels: {
        style: {
          fontSize: "10px",
          fontWeight: 600,
          fontFamily: "poppins, Arial, sans-serif",
          colors: ["white", "white", "white"],
          cssClass: "apexcharts-xaxis-label",
        },
      },
    },
    dataLabels: {
      enabled: false,
    },
    xaxis: {
      categories: [
        "Iyere Kennedy",
        "Iseghohi Tom",
        "Udoh David",
        "Izedonmwen Osarenren",
        "Akhimie Kingson",
        "Okpebholo Monday",
        "Osifo Isaiah",
        "Ugiagbe Odaro",
        "AreloegbeOsalumese",
        "Osiriame Edeipo",
        "Akpata Olumide",
        "Alufohai Oluyinka",
        "Ighodalo Asueirhinme",
        "Key Patience",
        "Anerua Abdulai",
        "Okungbowa Paul",
        "Akhalamhie Amiemenogbena",
      ],
      labels: {
        style: {
          fontSize: "10px",
          fontWeight: 600,
          fontFamily: "poppins",
          colors: [
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
            "black",
          ],
          cssClass: "apexcharts-xaxis-label",
        },
      },
    },
  };
  // var options4 = {   
  //   series: [
  //     {
  //       name: 'Obaseki',
  //       data: [307955],
  //     },
  //     {
  //       name: 'ize-Iyamu',
  //       data: [223615],
  //     },
  //     {
  //       name: 'Ibio Lucky',
  //       data: [2374],
  //     },
  //   ],
  //   colors: ["#EC293A", "#56D1E3", "#074178"],

  //   chart: {
  //     type: "bar",
  //     height: 350,
  //     height: '60%',
  //     width: '80%',
  //     // stacked: true,
  //     // stackType: "100%",
  //   },
  //   plotOptions: {
  //     bar: {
  //       horizontal: true,
  //       borderRadius: 4,
  //       borderRadiusApplication: 'end',
  //       columnWidth: '30%',
  //     },
  //   },
  //   stroke: {
  //     width: 1,
  //     colors: ["#fff"],
  //   },

  //   title: {
  //     text: "TOP THREE LEADING CANDIDATES",
  //     align: 'Left',
  //     style: {
  //       fontSize:  '15px',
  //       fontWeight:  'Regular',
  //       fontFamily:  'poppins',
  //       color:  '#ffffff',
  //     },
  //   },

  //   xaxis: {
  //     categories: [''],
  //     labels: {
  //       style: {
  //         fontSize:  '10px',
  //         fontWeight:  600,
  //         fontFamily:  'poppins, Arial, sans-serif',
  //         colors:  ['white', 'white', 'white'],
  //         cssClass: 'apexcharts-xaxis-label',
  //       },
  //     },
  //   },

  //   // yaxis: {
  //   //   title: {
  //   //     text: '%Lead'
  //   //   }
  //   // },

  //   tooltip: {
  //     y: {
  //       formatter: function (val) {
  //         return val;
  //       },
  //     },
  //   },
  //   fill: {
  //     opacity: 1,
  //   },
  //   legend: {
  //     position: "top",
  //     horizontalAlign: "center",
  //     offsetX: 40,
  //     labels: {
  //       fontSize: '10px',
  //       fontWeight: 600,
  //       fontFamily: 'poppins, Arial, sans-serif',
  //       colors:  ['white', 'white', 'white'],
  //       cssClass: 'apexcharts-xaxis-label',
  //     },
  //   },
  // };
  // var chart4 = new ApexCharts(chart2Container, options4);
  // chart4.render();


let spotlightActive = false; // Flag to track spotlight state
svgMap2.style.display = "none"; // Initially hide the previous election map

let prevDetailsMap = false; // Flag to track map details state
let chart4;
prevDetails.addEventListener("click", function () {
  prevDetailsMap = !prevDetailsMap;

  if (prevDetailsMap) {
    // Render the chart for the previous election
    // chart4 = new ApexCharts(chart2Container, options4);
    // chart4.render();
    // Toggle the maps visibility
    svgMap.style.display = "none";
    svgMap2.style.display = "block";
    prevDetails.innerHTML = `
    <span class="mdi--page-previous-outline"></span>
          <p class="previousElectionLink">2024 Election</p>
    `;
  } else {
    svgMap.style.display = "block";
    svgMap2.style.display = "none"; 
    // Update the button label
    prevDetails.innerHTML = `
    <span class="mdi--page-previous-outline"></span>
          <p class="previousElectionLink">Previous Election</p>
    `;
  }
});

  if (spotlightPartyLGA) {
    spotlightPartyLGA.addEventListener('click', function() {
      spotlightActive = !spotlightActive; // Toggle the spotlight state

      if (spotlightActive) {
        lgaPaths.forEach((path) => {
          path.style.opacity = '0.2'; // Reduce opacity of all LGA paths
        });
        pdpLGA.style.opacity = '1'; // Highlight the PDP LGA
        apcLGA.style.opacity = '1'; // Highlight the APC LGA
        lpLGA.style.opacity = '1'; // Highlight the LP LGA
        spotlightPartyLGA.innerHTML = `<span class="mdi--pin"></span>
          <p id="spotlightPartyLGALink" class="spotlightPartyLGALink">Remove Spotligtht</p>`; // Change text
      } else {
        lgaPaths.forEach((path) => {
          path.style.opacity = ''; // Reset opacity of all LGA paths
        });
        pdpLGA.style.opacity = ''; // Reset opacity of PDP LGA
        apcLGA.style.opacity = ''; // Reset opacity of APC LGA
        lpLGA.style.opacity = ''; // Reset opacity of LP LGA
        spotlightPartyLGA.innerHTML = `<span class="mdi--pin"></span>
          <p id="spotlightPartyLGALink" class="spotlightPartyLGALink">Spotligtht LGAs</p>`; // Change text back
      }
    });
  }

  var LGAChart = document.querySelector("#completeLGAChart");

  lgaPaths.forEach((path) => {
    path.addEventListener("click", function (event) {
      const lgaId = event.target.id;
      const data = lgaData[lgaId];

      LGAChart.innerHTML = `<div class="completeLGAChartNav">
      <div id="completeLGAChartHeader" class="completeLGAChartHeader">
        <p class="LGA_Name">${data.lgaName}</p>
      </div>
      <div id="completeLGAChartCloseButton" class="completeLGAChartCloseButton">
         <span class="zondicons--close"></span>
      </div>
    </div>`;

      LGAChart.style.display = "flex"; // Show the chart container
      var chart2 = new ApexCharts(LGAChart, options2); // Initialize the chart
      var chart3 = new ApexCharts(LGAChart, options3);
      chart2.render(); // Render the chart after click

      // Re-select the close button after updating the innerHTML
      var closeIcon = document.querySelector("#completeLGAChartCloseButton");
      closeIcon.addEventListener("click", function () {
        LGAChart.style.display = "none"; // Hide the chart container
      });
    });
  });

});
